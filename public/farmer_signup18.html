<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AgriDirect | Farmer Registration</title>
  <style>
    body {font-family: Arial, sans-serif; background:#f6fff6; margin:0;}
    nav {
      display:flex; justify-content:space-between; align-items:center;
      background:#5D8736; padding:15px 30px; font-size: larger;
    }
    .logo {display:flex; align-items:center;}
    .logo video {width:50px;height:50px;margin-right:10px;border-radius:5px;}
    .logo-text {font-size:24px;font-weight:bold;color:#fff;}
    nav ul {list-style:none; display:flex;}
    nav ul li {margin:0 15px; padding:7px;}
    nav ul li a {text-decoration:none; color:#fff; font-weight:bold;}
    nav ul li a:hover {color:#F4FFC3;}

    .form-container {
      width:460px; margin:40px auto; background:white; padding:25px;
      border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1);
      transition:transform 0.3s ease;
    }
    .form-container:hover {transform: scale(1.05);}
    h2 {text-align:center; color:#2e7d32; margin-bottom:20px;}
    label {display:block; margin-top:12px; font-weight:bold;}
    input, textarea, select {
      width:100%; padding:10px; margin-top:5px; border:1px solid #ccc; border-radius:8px;
    }
    input[type="file"] {padding:6px;}
    button {
      background:#2e7d32; color:white; border:none; padding:12px; width:100%;
      border-radius:10px; margin-top:15px; cursor:pointer; font-size:1rem;
    }
    button:hover {background:#1b5e20;}
    .error {color:red; font-size:0.9rem;}
    .link {text-align:center; margin-top:10px;}

    #message {
      display:none; position:fixed; top:50%; left:50%;
      transform:translate(-50%, -50%); padding:20px; border-radius:10px;
      font-weight:bold; text-align:center; z-index:1000;
    }
    #message.success {background:#d4edda; color:#155724;}
    #message.error {background:#f8d7da; color:#721c24;}

    footer {
      background:white; color:#809D3C; padding:30px 20px; text-align:center;
      border-top:2px solid #5D8736; margin-top:80px;
    }
    .footer-container {display:flex; justify-content:space-between; flex-wrap:wrap; max-width:1200px; margin:auto;}
    .footer-logo {display:flex; align-items:center; font-size:22px; font-weight:bold;}
    .footer-logo video {width:50px;height:50px;margin-right:10px;border-radius:5px;}
    .footer-social a img {width:30px;margin:0 10px;transition:transform 0.3s;}
    .footer-social a img:hover {transform:scale(1.2);}
    .footer-copy {margin-top:15px;font-size:14px;opacity:0.8;}
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav>
    <div class="logo">
      <video autoplay loop muted>
        <source src="image/agridirect.mp4" type="video/mp4">
      </video>
      <span class="logo-text">AgriDirect</span>
    </div>
    <ul>
      <li><a href="shared_homepage.html">HOME</a></li>
      <li><a href="Marketplace.html">MARKETPLACE</a></li>
      <li><a href="qr-scan.html">SCAN QR CODE</a></li>
      <li><a href="about_us.html">ABOUT US</a></li>
      <li><a href="role.html">LOGIN/SIGN UP</a></li>
    </ul>
  </nav>

  <!-- Farmer Registration Form -->
  <div class="form-container">
    <h2>Register as Verified Farmer</h2>
    <form id="farmerForm" enctype="multipart/form-data">

      <!-- Basic Info -->
      <label>Full Name</label>
      <input type="text" name="name" required>

      <label>Farm Name</label>
      <input type="text" name="farmName" required>

      <label>Location / Village</label>
      <input type="text" name="location" required>

      <label>Email</label>
      <input type="email" name="email" required>

      <label>Mobile Number</label>
      <input type="tel" id="fphone" name="mobile" pattern="[0-9]{10}" placeholder="10-digit number" required>
      <div id="errorMsg" class="error"></div>

      <!-- Document Uploads -->
      <label>Aadhaar Number (UID)</label>
      <input type="text" id="aadhaar" name="aadhaar" pattern="[0-9]{12}" maxlength="12" placeholder="12-digit Aadhaar number" required>

      <label>Upload Aadhaar Card</label>
      <input type="file" name="aadhaarFile" accept=".pdf,.jpg,.jpeg,.png" required>

      <label>Upload PAN Card</label>
      <input type="file" name="panFile" accept=".pdf,.jpg,.jpeg,.png" required>

      <label>Land Ownership Proof (7/12 Utara / Khasra / Patta)</label>
      <input type="file" name="landProof" accept=".pdf,.jpg,.jpeg,.png" required>

      <label>Lease / Mutation Certificate (if tenant farmer)</label>
      <input type="file" name="leaseProof" accept=".pdf,.jpg,.jpeg,.png">

      <label>Recent Crop Insurance / Farmer ID</label>
      <input type="file" name="farmerIDProof" accept=".pdf,.jpg,.jpeg,.png">

      <label>Soil Health / Organic Certificate (optional)</label>
      <input type="file" name="organicProof" accept=".pdf,.jpg,.jpeg,.png">

      <!-- Farming Info -->
      <label>Farming Experience (in years)</label>
      <input type="number" name="experience" min="0" required>

      <label>Type of Farming</label>
      <select name="farmingType" required>
        <option value="">Select</option>
        <option value="Natural/Organic">Natural / Organic</option>
        <option value="Conventional">Conventional</option>
        <option value="Both">Both</option>
      </select>

      <label>Password</label>
      <input type="password" name="password" minlength="6" required>

      <button type="submit">Register Farmer</button>
    </form>

    <div class="link">Already registered? <a href="farmer_login18.html">Login here</a></div>

    <div id="message">
      <span id="messageText"></span>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-container">
      <div class="footer-logo">
        <video autoplay loop muted playsinline>
          <source src="image/logo.mp4" type="video/mp4">
        </video>
        <span>AgriDirect</span>
      </div>
      <div class="footer-contact">
        <h3>Contact Us</h3>
        <p>Email: support@agriDirect.com</p>
        <p>Phone: +91 10101 01010</p>
      </div>
      <div class="footer-social">
        <h3>Follow Us</h3>
        <a href="#"><img src="image/linkedin.png" alt="LinkedIn"></a>
        <a href="#"><img src="image/twitter.png" alt="Twitter"></a>
        <a href="#"><img src="image/instagram.png" alt="Instagram"></a>
        <a href="#"><img src="image/youtube.png" alt="YouTube"></a>
      </div>
    </div>
    <p class="footer-copy">&copy; 2025 AgriDirect. All Rights Reserved.</p>
  </footer>

  <!-- Script -->
  <script>
    const form = document.getElementById("farmerForm");
    const messageDiv = document.getElementById("message");
    const messageText = document.getElementById("messageText");

    form.addEventListener("submit", async function(e){
      e.preventDefault();
      let phone = document.getElementById("fphone").value;
      if(!/^\d{10}$/.test(phone)){
        document.getElementById("errorMsg").innerText = "Phone must be 10 digits!";
        return;
      } else {
        document.getElementById("errorMsg").innerText = "";
      }

      const formData = new FormData(form);
      try {
        const res = await fetch("http://localhost:5000/farmer/register", {
          method: "POST",
          body: formData
        });
        const data = await res.json();
        messageText.innerText = data.message;
        messageDiv.className = data.status || "success";
        messageDiv.style.display = "block";

        if(data.status === "success"){
          setTimeout(() => window.location.href = "farmer_login18.html", 2000);
        }
      } catch(err){
        messageText.innerText = "Server error!";
        messageDiv.className = "error";
        messageDiv.style.display = "block";
      }
    });
  </script>

</body>
</html>
